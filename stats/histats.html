<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="300"> <!-- Refresh the whole page every 5 minutes -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Services Links</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* A light gray background */
        }
        .histats-image {
            transform: rotate(-90deg); /* Rotate image 90 degrees counter-clockwise */
            filter: brightness(1.1) saturate(1.2); /* Make the image brighter and more colorful */
            transition: filter 0.3s ease-in-out; /* Smooth transition for the hover effect */
        }
        
        /* Image container */
        .image-container {
            position: relative;
            display: flex; /* Use flexbox to center the image */
            justify-content: center;
            align-items: center;
            /* Make the container large enough for the rotated image */
            width: 80px;
            height: 80px;
        }

        /* Apply hue-rotate effect on hover */
        .image-container:hover .histats-image {
            filter: brightness(1.1) saturate(1.2) hue-rotate(45deg);
        }

    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-sm mx-auto">
        <!-- The list will be dynamically generated here -->
        <div id="service-list" class="space-y-2">
            <!-- Content is generated by JavaScript -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Array of service objects. Edit this to add, remove, or change services.
            const services = [
                {
                    name: 'EMAS3',
                    url: 'https://emas3.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4919902&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4919902.gif?4919902&103'
                },
                {
                    name: 'EMAS2',
                    url: 'https://emas2.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4463105&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4463105.gif?4463105&103'
                },
                {
                    name: 'IDOLS2',
                    url: 'https://idol2.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4919907&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4919907.gif?4919907&103'
                },
                {
                    name: 'IDOLS1',
                    url: 'https://idols.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4975946&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4975946.gif?4975946&103'
                },
                {
                    name: 'OCW',
                    url: 'https://ocw.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4590850&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4590850.gif?4590850&103'
                },
                {
                    name: 'OVIS',
                    url: 'https://ovis.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4590850&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4590857.gif?4590857&103'
                },
                {
                    name: 'DPPD',
                    url: 'https://dpasdp.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4590869&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4590869.gif?4590869&103'
                },
                {
                    name: 'PJJ',
                    url: 'https://pjj.ui.ac.id',
                    statsUrl: 'https://www.histats.com/viewstats/?SID=4381608&f=2',
                    statsImgSrc: 'https://s4is.histats.com/stats/i/4381608.gif?4381608&103'
                }
            ];

            const serviceListContainer = document.getElementById('service-list');

            // Generate the HTML for each service from the array
            services.forEach(service => {
                const serviceDiv = document.createElement('div');
                serviceDiv.className = 'flex flex-col items-center';
                
                serviceDiv.innerHTML = `
                    <a href="${service.url}" target="_blank" class="text-base font-extrabold text-indigo-600 hover:text-indigo-800">${service.name}</a>
                    <a href="${service.statsUrl}" alt="${service.name} Stats" target="_blank" class="image-container -mt-4">
                        <img border="0" src="${service.statsImgSrc}" alt="${service.name} Stats Image" class="histats-image absolute transition-opacity duration-500 ease-in-out opacity-100">
                        <img border="0" src="${service.statsImgSrc}" alt="${service.name} Stats Image" class="histats-image absolute transition-opacity duration-500 ease-in-out opacity-0">
                    </a>
                `;
                serviceListContainer.appendChild(serviceDiv);
            });

            // This function will reload the histats images every 10 seconds with a crossfade effect.
            function refreshStatImages() {
                const imageContainers = document.querySelectorAll('.image-container');

                imageContainers.forEach(container => {
                    const visibleImg = container.querySelector('.opacity-100');
                    const hiddenImg = container.querySelector('.opacity-0');

                    if (!visibleImg || !hiddenImg) return;

                    // Prepare the new source for the hidden image
                    let originalSrc = hiddenImg.src;
                    originalSrc = originalSrc.replace(/&?_cb=\d+/, '');
                    
                    if (originalSrc.includes('?')) {
                        hiddenImg.src = `${originalSrc}&_cb=${new Date().getTime()}`;
                    } else {
                        hiddenImg.src = `${originalSrc}?_cb=${new Date().getTime()}`;
                    }

                    // Once the new image is loaded in the background, start the crossfade
                    hiddenImg.onload = () => {
                        visibleImg.classList.remove('opacity-100');
                        visibleImg.classList.add('opacity-0');
                        
                        hiddenImg.classList.remove('opacity-0');
                        hiddenImg.classList.add('opacity-100');
                    };
                });
            }

            // Set the interval to call the refresh function every 10 seconds (10000 milliseconds)
            setInterval(refreshStatImages, 10000);
        });
    </script>

</body>
</html>

